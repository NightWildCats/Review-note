<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>尚硅谷HTML5 初级阶段</title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
          name="viewport">
    <style type="text/css">
        body {
            text-align: center;
        }

        canvas {
            border: 1px solid red;
            background: url("img/img21.jpg") no-repeat;
            -webkit-background-size: 350px;
            background-size: 350px;

        }
    </style>
</head>
<body>

<canvas id="myCanvas" width="350" height="350">
    你的浏览器不支持 Canvas
</canvas>

<script type="text/javascript">

    /**
     * 刮刮卡实现步骤：
     *
     * ① 建立一个 Canvas 对象 通过通过设置 Canvas的背景图片或者引入图片，进而成为目标图片
     * ② 为 Canvas 对象绘制一个遮罩层区域（可以是一张图片或者是绘制的形状），成为源目标
     * ③ 通过源目标的ctx.globalCompositeOperation = "destination-out"; 来使源目标透明
     *
     */

    var  myCanvas = document.querySelector("#myCanvas");
    var  ctx = myCanvas.getContext("2d");

    ctx.fillStyle = "#f0f0f0";
    ctx.fillRect(0,0,350,350);


    ctx.globalCompositeOperation = "destination-out";

    myCanvas.onmousedown = function (ev) {
        ctx.beginPath();
        ctx.arc(ev.offsetX,ev.offsetY,30,0,2*Math.PI,false);
        ctx.fill();
    };












    //    var myCanvasDom = document.querySelector("#myCanvas");
//    //    获取画笔：canvas  2d 上下文
//    var painting = myCanvasDom.getContext("2d");
//    //    添加目标图像，大小等于画布
//    painting.fillStyle = "#f0f0f0";
//    painting.fillRect(0, 0, 350, 350);
//    painting.globalCompositeOperation = "destination-out";
//
//    //    监听鼠标移动的坐标
//    myCanvasDom.onmousedown = function (ev) {
//
////        一定要设置重新绘制图形
//            painting.beginPath();
//
//            //    源图像，绘制一个半径为30的圆形
//            painting.fillStyle = "#f00";
//            painting.arc( ev.offsetX,  ev.offsetY, 30, 0, Math.PI*2);
//            painting.fill();
//    }
</script>
</body>
</html>