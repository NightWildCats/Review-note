<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>预加载</title>
	</head>
		
	<body>
		<div id="warp">
			<img src="../img/1.jpg"/>
		</div>
	</body>
	<script type="text/javascript">
		var arr=["img/1.jpg","img/2.jpg","img/3.jpg","img/4.jpg","img/5.jpg"];
		var flag = 0;
		var imges = new Image();
		sorte ();
		function sorte () {
			imges.src = arr[flag];
			//预加载
			imges.onload = function () {
				flag++;
				if (flag < arr.length) {
					//递归调用
					sorte();
				}
				document.title = flag+"/"+arr.length;
			};
			//加载失败
			imges.onerror = function () {
				alert("加载失败");
			};
		}
		
		var img = document.getElementsByTagName("img")[0];
		var i = 0;
		//蹄片单击事件
		img.onclick = function () {
			i++;
			img.src = arr[i%arr.length];
		};
	</script>
</html>
